<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Complaints | Elite Resident Portal</title>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
<style>
body{background:linear-gradient(120deg,#fbe9cf 0%,#ffd47e 100%);font-family:'Poppins',Georgia,serif;margin:0;padding:0}
#ajax-error-bar,#ajax-success-bar{display:none;position:fixed;top:70px;left:0;width:100vw;z-index:9999;padding:15px;font-weight:bold;text-align:center;font-size:1.1em}
#ajax-error-bar{background:#e3242b;color:#fff;box-shadow:0 2px 14px #a00}
#ajax-success-bar{background:#28c76f;color:#fff;box-shadow:0 2px 14px #1a7a47}
.complaint-container{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 190px)}
.complaint-box{background:#fffbe6;padding:56px 50px 42px 50px;border-radius:22px;max-width:540px;min-width:370px;box-shadow:0 10px 44px #ffd47e54,0 2px 16px #ffe06623;margin:56px auto 46px auto;color:#87602a}
.complaint-box h2{color:#e3881d;font-family:'Georgia',serif;margin-bottom:20px;letter-spacing:1.2px;font-size:2.16em;text-align:center;font-weight:800}
label{color:#a55f17;font-weight:700;margin-top:13px;margin-bottom:6px;font-size:1.13em;font-family:Poppins,Georgia,serif;display:block}
input,textarea,select{width:100%;margin-top:8px;margin-bottom:22px;padding:16px 22px;border-radius:2.2em;border:1.6px solid #ffd47e;background:#ffefde;color:#87602a;font-size:1.17em;box-shadow:0 2px 14px #ffd47e22 inset;outline:none;transition:border .19s}
input:focus,textarea:focus,select:focus{border-color:#e3881d}
textarea{min-height:90px;resize:vertical}
button[type="submit"]{width:100%;background:linear-gradient(90deg,#ffeacb 0%,#ffd47e 100%);color:#6f412d;font-weight:700;border:none;border-radius:2em;font-size:1.21em;padding:1em 0;box-shadow:0 2px 18px #ffd47e99,0 4px 18px #f9ba6525;margin-top:10px;margin-bottom:18px;cursor:pointer;transition:background .19s,box-shadow .19s}
button[type="submit"]:hover{background:linear-gradient(90deg,#ffd47e 0%,#fffbea 100%);color:#c99843;box-shadow:0 2px 26px #ffd47ebb}
.test-section{margin-top:30px;padding-top:20px;border-top:2px solid #ffd47e}
.test-section h4{color:#e3881d;text-align:center;margin-bottom:15px;font-family:Georgia}
.test-btn{width:100%;margin:8px 0;padding:12px;color:#fff;border:none;border-radius:2em;cursor:pointer;font-weight:600;transition:opacity .2s}
.test-btn:hover{opacity:0.85}
@media (max-width:700px){.complaint-box{padding:22px 6vw 20px 6vw;max-width:99vw;min-width:unset}.complaint-container{padding-top:10vw}}
</style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark">
<div class="container">
<a class="navbar-brand" href="index.html"><i class="fas fa-building"></i> Elite Resident Portal</a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse justify-content-end" id="navbarNav">
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
<li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
<li class="nav-item"><a class="nav-link" href="login.html">Login</a></li>
<li class="nav-item"><a class="nav-link" href="services.html">Services</a></li>
<li class="nav-item"><a class="nav-link" href="gallery.html">Gallery</a></li>
<li class="nav-item"><a class="nav-link active" href="complaints.html">Complaints</a></li>
<li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
<li class="nav-item"><a class="nav-link" href="stats.html">Rating Statistics</a></li>
</ul>
</div>
</div>
</nav>
<div class="complaint-container">
<div class="complaint-box">
<h2>Submit Your Complaint</h2>
<form id="complaintForm">
<label for="name">Your Name:</label>
<input type="text" id="name" required>
<label for="apartment">Apartment Number:</label>
<input type="text" id="apartment" required>
<label for="category">Category:</label>
<select id="category">
<option value="maintenance">Maintenance</option>
<option value="security">Security</option>
<option value="services">Services</option>
<option value="others">Others</option>
</select>
<label for="desc">Complaint:</label>
<textarea id="desc" required></textarea>
<button type="submit">Submit Complaint</button>
</form>
<div class="test-section">
<h4><i class="fas fa-flask"></i> Test AJAX Error Handling</h4>
<button onclick="testSuccess()" class="test-btn" style="background:#28c76f"><i class="fas fa-check-circle"></i> Test Success (200)</button>
<button onclick="testError400()" class="test-btn" style="background:#ff9f43"><i class="fas fa-exclamation-triangle"></i> Test Bad Request (400)</button>
<button onclick="testError401()" class="test-btn" style="background:#e3242b"><i class="fas fa-lock"></i> Test Unauthorized (401)</button>
<button onclick="testError404()" class="test-btn" style="background:#6c757d"><i class="fas fa-search"></i> Test Not Found (404)</button>
<button onclick="testError500()" class="test-btn" style="background:#8b0000"><i class="fas fa-server"></i> Test Server Error (500)</button>
<button onclick="testNetwork()" class="test-btn" style="background:#495057"><i class="fas fa-wifi"></i> Test Network Error</button>
</div>
</div>
</div>
<footer>
<div class="footer-glow"></div>
<span style="color:#e3881d"><i class="fas fa-gem"></i></span>
&nbsp;&copy; 2025 Elite Resident Community &mdash; All Rights Reserved.
</footer>
<script>
function showError(msg){if($("#ajax-error-bar").length===0){$("body").prepend('<div id="ajax-error-bar"></div>')}$("#ajax-error-bar").stop(true,true).show().text(msg).fadeIn(300);$("#ajax-success-bar").hide();setTimeout(()=>$("#ajax-error-bar").fadeOut(400),5000)}
function showSuccess(msg){if($("#ajax-success-bar").length===0){$("body").prepend('<div id="ajax-success-bar"></div>')}$("#ajax-success-bar").stop(true,true).show().text(msg).fadeIn(300);$("#ajax-error-bar").hide();setTimeout(()=>$("#ajax-success-bar").fadeOut(400),4000)}
function ajaxWithStatus(url,options={},onSuccess=null){$.ajax({url:url,method:options.method||"POST",data:options.data||null,timeout:6000,dataType:"json",success:function(data,textStatus,jqXHR){if(jqXHR.status===200){showSuccess("‚úì Complaint submitted successfully!");if(onSuccess)onSuccess(data)}},error:function(jqXHR,textStatus,errorThrown){if(textStatus==="timeout"){showError("‚è± Request timed out. Please try again.")}else if(jqXHR.status===0){showError("üåê Network error. Check your connection.")}else if(jqXHR.status===400){showError("‚ö† Bad request (400): Please verify all fields.")}else if(jqXHR.status===401){showError("üîí Unauthorized (401): Please login first.")}else if(jqXHR.status===403){showError("üö´ Access denied (403): You don't have permission.")}else if(jqXHR.status===404){showError("üîç Not found (404): Service unavailable.")}else if(jqXHR.status===500){showError("‚öô Server error (500): Please try again later.")}else{showError("‚ùå Error: "+jqXHR.status+" "+errorThrown)}}})}
document.getElementById("complaintForm").addEventListener("submit",function(e){e.preventDefault();let formData={name:$("#name").val(),apartment:$("#apartment").val(),category:$("#category").val(),description:$("#desc").val()};ajaxWithStatus("submit_complaint.php",{method:"POST",data:formData},function(response){document.getElementById("complaintForm").reset()})});
function testSuccess(){ajaxWithStatus("test-backend.php?test=success",{method:"GET"})}
function testError400(){ajaxWithStatus("test-backend.php?test=400",{method:"GET"})}
function testError401(){ajaxWithStatus("test-backend.php?test=401",{method:"GET"})}
function testError404(){ajaxWithStatus("test-backend.php?test=404",{method:"GET"})}
function testError500(){ajaxWithStatus("test-backend.php?test=500",{method:"GET"})}
function testNetwork(){ajaxWithStatus("http://fake-invalid-domain-xyz123.com/api")}
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
